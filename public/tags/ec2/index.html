<!DOCTYPE html>
<html lang="en-us">

	<head>
		<title> Ec2 &middot; My Tech Blog </title>

		<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.13" />


<script   src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<link rel="stylesheet" href="https://www.vishnu-tech.com/css/nix.css">

 
<link href="https://fonts.googleapis.com/css?family=Inconsolata|Open+Sans|Roboto|Montserrat|Concert+One" rel="stylesheet">




	</head>

	<body>
		<header>
<nav class="navbar navbar-default navbar-fixed-top navbar-inverse font-header">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" id="green-terminal" href=https://www.vishnu-tech.com/>vishnu@Vimpelcom ~ $</a>
		</div>

		
		<div class="collapse navbar-collapse" id="navbar-collapse-1">
			<ul class="nav navbar-nav navbar-right">
				<li>
					<a href="https://www.vishnu-tech.com/">/home/vishnu</a>
				</li>
				
				
				<li >
					<a href="/blog">~/blogs</a>
				</li>
				
				
				<li >
					<a href="/about">~/about me</a>
				</li>
				

			</ul>
		</div>
	</div>
</nav>
</header>

		<div class="container wrapper">
			<div class="row">
				<div class="col-xs-12 text-center">
					<h1 id=>Ec2</h1>
				</div>
			</div>
			<ul id="post-list">
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/Setup-ranger-with-HA/">Setup Ranger with HA &amp; running Kubernetes on top of it.</a></h4>
							<h4 class="post-date">Mar 6, 2017</h4>
						</div>
						<div class="post-summary"><p>In this blog, we are setting up a highly available Ranger cluster in AWS and running Kubernetes on top of it
Why Rancher? Rancher is a complete, open source platform for deploying and managing containers in production. It includes commercially-supported distributions of Kubernetes, Mesos, and Docker Swarm, making it easy to run containerized applications on any infrastructure.
Prerequisites:  Here I will be creating the AWS setup as below:   Create 3 instance for Ranger Server   Create 3 instance for Ranger Host   Create ELB for Ranger Server   Put ELB Listeners as below:   Put ELB Healthcheck as below:   Once you setup the ELB, you need to enable the proxy protocol mode  $ aws elb create-load-balancer-policy \ --load-balancer-name rancher-elb \ --policy-name rancher-elb-policy \ --policy-type-name ProxyProtocolPolicyType \ --policy-attributes AttributeName=ProxyProtocol,AttributeValue=true \ --region eu-west-1   $ aws elb set-load-balancer-policies-for-backend-server \ --load-balancer-name rancher-elb \ --instance-port 80 \ --policy-names rancher-elb-policy \ --region eu-west-1   $ aws elb set-load-balancer-policies-for-backend-server \ --load-balancer-name rancher-elb \ --instance-port 8080 \ --policy-names rancher-elb-policy \ --region eu-west-1   Create a MySql RDS instance   Once the Ranger Server is UP, Login to those servers and run the below command:   docker run -d --restart=unless-stopped -p 8080:8080 -p 9345:9345 \ rancher/server:latest \ --db-host &lt;your rds endpoint&gt; \ --db-port 3306 --db-user &lt;your db user&gt; \ --db-pass &lt;your db password&gt; --db-name &lt;your db name&gt; \ --advertise-address &lt;put your rancher private server ip&gt;   Once the cluster is UP, you can authorize it with Github   Once you authorized, you can add host like below:   You can also add host by running the command on east host nodes like below:  sudo docker run -e CATTLE_AGENT_IP=&quot;172....</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/Setup-ranger-with-HA/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/Kubernetes-HA-in-AWS/">Kubernetes with HA in AWS</a></h4>
							<h4 class="post-date">Feb 28, 2017</h4>
						</div>
						<div class="post-summary"><p>In this blog, we are setting up a highly available Kubernetes cluster in AWS using Kops
I am creating our Kubernetes cluster in a private VPC.
I hope everyone knows how to create a VPC architecture in AWS, so I will be mainly focusing on K8s.
Prerequisites:  AWS:
 Cli VPC Public Subnets Private Subnets Route Tables Internet Gateway NAT Gateway Route53 domain  Kops:
You can easily download from here...</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/Kubernetes-HA-in-AWS/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/docker-swarm-production-setup/">Docker swarm production setup</a></h4>
							<h4 class="post-date">Nov 30, 2016</h4>
						</div>
						<div class="post-summary"><p>Docker Swarm is a cluster of docker engines.
 Docker Swarm serves the standard Docker API, any tool that already communicates with a Docker daemon can use Swarm to transparently scale to multiple hosts.
 Swarm mode is native in Docker 1.12 RC
 You can orchestrate service when it&rsquo;s in Swarm mode.
   We are creating 3 swarm manager and 3 worker nodes for high availability in AWS....</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/docker-swarm-production-setup/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/ansible-playbook-for-wherehows-a-data-discovery-and-lineage-portal/">Ansible playbook for WhereHows (A Data Discovery and Lineage Portal)</a></h4>
							<h4 class="post-date">Oct 18, 2016</h4>
						</div>
						<div class="post-summary"><p>WhereHows, a data discovery and lineage portal. At LinkedIn, WhereHows integrates with all of their data processing environments and extracts coarse and fine grain metadata from them. Then, it surfaces this information through two interfaces:
 A web application that enables navigation, search, lineage visualization, annotation, discussion, and community participation
 An API endpoint that empowers automation of other data processes and applications.
  
Here I am creating an Ansible playbook to play around with WhereHows....</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/ansible-playbook-for-wherehows-a-data-discovery-and-lineage-portal/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/technewsletter-vol15/">TechNewsLetter Vol:15</a></h4>
							<h4 class="post-date">Aug 31, 2016</h4>
						</div>
						<div class="post-summary"><p>Sharing some interesting links to keep you busy!!
Dropbox Hacked — More Than 68 Million Account Details Leaked Online Dropbox employee’s password reuse led to theft of 60M+ user credentials
Undebt: How We Refactored 3 Million Lines of Code Nginx resolver vulnerabilities allow cache poisoning attack On Uber’s Choice of Databases On Cybersecurity and Being Targeted A utility for sending notifications, on demand and when commands finish
How do you handle DDoS attacks?...</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/technewsletter-vol15/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/ansible-playbooks-to-create-private-docker-registry-in-aws/">Ansible playbooks to create private docker registry in AWS</a></h4>
							<h4 class="post-date">Aug 19, 2016</h4>
						</div>
						<div class="post-summary"><p> Creating a private docker registry in AWS using Ansible playbooks. You can find the playbooks from here.
Variables in playbooks  _server_name: &ldquo;docker-registry.vishnudxb.me&rdquo; _
 _ssl_bundle_crt: &ldquo;/etc/nginx/ssl/ssl-bundle.crt&rdquo; _
 _ssl_crtkey: &ldquo;/etc/nginx/ssl/ssl-cert.key&rdquo;
  AWS instance tag name  The playbook will identified the instance using the tag name ie docker-registry  To-Do  Authorization for users inside the registry.  ...</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/ansible-playbooks-to-create-private-docker-registry-in-aws/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/running-openstack-with-lxc-as-hypervisor-using-terraform/">Running Openstack with LXC as hypervisor using Terraform</a></h4>
							<h4 class="post-date">May 24, 2016</h4>
						</div>
						<div class="post-summary"><p>Hi Guys,
Today I got some time to play around with Terraform &amp; Openstack. If you want a test Openstack environment with LXC in AWS, you can use this repo.
It creates a new VPC environment in AWS in us-east-1 region and boot up an Ubuntu instance in the newly created VPC environment and install Openstack with LXC as hypervisor....</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/running-openstack-with-lxc-as-hypervisor-using-terraform/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/high-availability-load-balancing-layer-haproxy-elb/">High Availability @ Load Balancing Layer-HAProxy / ELB</a></h4>
							<h4 class="post-date">Apr 1, 2013</h4>
						</div>
						<div class="post-summary"><p>Architecting High Availability at the Load Balancing layer is one of the important aspects in the web scale systems in AWS. We can follow multiple strategies for achieving the same. I am listing some of the designs for achieving the same.
Pattern 1: Route 53 DNS RR + HAProxy Route53 is a Managed DNS service provided by Amazon Web Services. Route 53 supports Round robin and weighted algorithms. If the Route53 DNS server has several entries for a given hostname, it will return all of them in a rotating order....</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/high-availability-load-balancing-layer-haproxy-elb/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/install-ec2-api-tools-on-linux/">Install ec2-api Tools on Linux</a></h4>
							<h4 class="post-date">Dec 10, 2012</h4>
						</div>
						<div class="post-summary"><p>OS - Ubuntu Lucid Processor - x64
Download the ec2-api tools from the amazon site
Downloaded jre1.7.0_x64 from the java site
Steps to install JAVA JRE #add-apt-repository ppa:sun-java-community-team/sun-java6 #apt-get update #apt-cache search java* [to know the latest jre/jdk] #apt-get install sun-java6-jre java is installed into /usr/lib/jvm/java-6-sun-1.6.0.21/
To check successful java installation #java -version
Setting up variables #export JAVA_HOME=/usr/lib/jvm/java-6-sun-1.6.0.21 [put it in /etc/profiles]
Another Check $JAVA_HOME/bin/java -version
Now the prequisites are done ....</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/install-ec2-api-tools-on-linux/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/to-terminate-an-ec2-instance-disabled-via-ec2-api/">To Terminate an EC2 Instance, disabled via ec2-api</a></h4>
							<h4 class="post-date">Dec 10, 2012</h4>
						</div>
						<div class="post-summary"><p>#ec2minatt i-555555 –disable-api-termination false –region us-east-1 -K /EC2_API_Certs/pk-4GGV.pem -C /EC2_API_Certs/cert-GV.pem
Make a note of the ebs-id attached
Terminate the Instance from the AWS Console and then Delete the EBS, same could be done through command line...</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/to-terminate-an-ec2-instance-disabled-via-ec2-api/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/quick-mysql-commands/">Quick MySQL Commands</a></h4>
							<h4 class="post-date">Dec 10, 2012</h4>
						</div>
						<div class="post-summary"><p>To Login into the MySQL #mysql -u username -ppaswword and if its RDS : #mysql -h rds.indexpoint/dnsname/ip -u username -ppassword
To List Databases mysql&gt;show databases;
To View tables mysql&gt;use databasename; mysql&gt;show tables;
To View Contents Inside the Table mysql&gt;select * from tablename;
To Delete Database mysql&gt;drop database dbname;
To create Database user (we also need to grant permission to a db to gain access for the new user.) mysql&gt;create user ‘UNNI’@&lsquo;ipaddress/%/localhost’ identified by ‘passwd3@1′;...</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/quick-mysql-commands/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/how-to-reset-mysql-root-password/">How to Reset Mysql ROOT Password</a></h4>
							<h4 class="post-date">Dec 10, 2012</h4>
						</div>
						<div class="post-summary"><p>1) Stop the mysql demon
/etc/init.d/mysql stop
2) Start the mysqld demon process using the –skip-grant-tables option with this command
/usr/sbin/mysqld –skip-grant-tables –skip-networking &amp;
3) start the mysql client process using this command
mysql -u root
4) from the mysql prompt execute this command to be able to change any password
FLUSH PRIVILEGES;
5) Then reset/update your password
SET PASSWORD FOR root@’localhost’ = PASSWORD(‘password’);
FLUSH PRIVILEGES;
6) Then stop the mysqld process and relaunch it with the classical way:...</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/how-to-reset-mysql-root-password/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/mysql-database-sharding/">Mysql- Database Sharding</a></h4>
							<h4 class="post-date">Dec 10, 2012</h4>
						</div>
						<div class="post-summary"><p>“share nonthing” : Key Law on database sharding Architecture. Small Databases are Fast, Big Databases are Slow !!! DB Sharding – Breaking a Bigger DB into a Smaller DB.
Key Points on DB Sharding –
 Partition Data across master
 Writes and read are distributed
 Application needs modification
 Needs choice partitioning strategy for uniform data distribution.
  Issues -
 Joins cannot be performed across shards...</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/mysql-database-sharding/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/install-use-s3cmd-for-s3-storage/">Install &amp; Use s3cmd for S3 Storage</a></h4>
							<h4 class="post-date">Dec 10, 2012</h4>
						</div>
						<div class="post-summary"><p>Amazon S3 is a reasonably priced data storage service. Ideal for off-site backups, archiving and other data storage needs. It is generally more reliable than your regular web hosting for storing your files and images. Check out About Amazon S3 section to find out more.
S3cmd is a command line tool for uploading, retrieving and managing data in Amazon S3. It is best suited for power users who don’t fear command line....</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/install-use-s3cmd-for-s3-storage/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/aws-productssolutions-admins-capsule/">AWS Products/Solutions – Admins Capsule</a></h4>
							<h4 class="post-date">Dec 10, 2012</h4>
						</div>
						<div class="post-summary"><p>Database Amazon RDS
 You can think of a RDS DB Instance as a database environment in the cloud with the compute and storage resources you specify.
 You can create and delete DB Instances, define/refine infrastructure attributes of your DB Instance(s), and control access and security via the AWS Management Console, Amazon RDS APIs, and Command Line Tools.
 Multiple MySQL databases or SQL Server databases (up to 30) or Oracle database schemas can be created on a given DB Instance....</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/aws-productssolutions-admins-capsule/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/rds-cli-tools-setup/">RDS CLI Tools Setup</a></h4>
							<h4 class="post-date">Dec 10, 2012</h4>
						</div>
						<div class="post-summary"><p>#cd /usr/local/rds #chmod 744 bin/*
Setup Credentials into the file to use a default AWS Account — $ cd /usr/local/rds $ sudo cp credential-file-path.template credential-file $ sudo vi credential-file $ sudo chmod 600 /usr/local/aws/rds/credential-file
Now add to the ~/.bashrc
Set location of the ec2 and rds command line tools export EC2_HOME=/usr export AWS_RDS_HOME=/usr/local/aws/rds
Set AWS path export PATH=$PATH:$EC2_HOME/bin:$AWS_RDS_HOME/bin
Source the .bashrc file — $ source .bashrc
Reference Link 1...</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/rds-cli-tools-setup/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/rds-sharding-quick-commands/">RDS Sharding &amp; Quick Commands</a></h4>
							<h4 class="post-date">Dec 10, 2012</h4>
						</div>
						<div class="post-summary"><p>Source article on RDS sharding by Amazon.
http://aws.amazon.com/articles/0040302286264415#virtualshards
What is sharding?
Here unlike ec2 instances there is no rds-db-instance-id instead we use the db-instance names (called as dbinstance_identifiers) in our rds commmands to identify among rds-db-instances.
Example- Database Name – news RDS DB Instances – shard1, shard2
Consider creating 2 db-shards ie we need 2 db-instance to map those db-shards to db-instances. To reduce the schema setup overhead we use the snapshot and restore capabilities of Amazon RDS to do the following:...</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/rds-sharding-quick-commands/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/rds-scaling/">RDS Scaling</a></h4>
							<h4 class="post-date">Dec 10, 2012</h4>
						</div>
						<div class="post-summary"><p>If your app gets to the point that you need to start scaling either up or out, it is a good idea to switch to multi-AZ if you don’t run it already. If you have a simple RDS instance, you will degrade your service significantly while scaling, as you can expect to lose the ability to write and/or read. With multi-AZ RDS instances, your service is almost uninterrupted.
Scaling Up (or Down)...</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/rds-scaling/">Read More</a>
						</div>
					</div>
				</li>
				
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://www.vishnu-tech.com/blog/elb-and-autoscaling-in-aws/">ELB and Autoscaling in AWS</a></h4>
							<h4 class="post-date">Dec 10, 2012</h4>
						</div>
						<div class="post-summary"><p>Installing ELB and Autoscale API tools
export AWS_ELB_HOME=/home/users/unni/bashrc/elbtool/ElasticLoadBalancing-1.0.12.0 export PATH=$PATH:$AWS_ELB_HOME/bin export AWS_AUTO_SCALING_HOME=/home/users/unni/bashrc/auto/AutoScaling-1.0.33.1 export PATH=$PATH:$AWS_AUTO_SCALING_HOME/bin
AUTOSCALING Create AS, Create AS Group and Setup Scaleup Parameter.
#as-create-launch-config as-agile –region eu-west-1 –image-id ami-b123456 –instance-type t1.micro –key elbtest –group default -K ec2_certs/pk-K4.pem -C ec2_certs/cert-K4.pem
OK-Created launch config
_#as-create-auto-scaling-group as-agile-gp –launch-configuration as-agile –region eu-west-1 –availability-zones eu-west-1a,eu-west-1b –min-size 2 –max-size 3 –load-balancers elbtest-agile -K ec2_certs/pk-K4.pem -C ec2certs/cert-K4.pem
OK-Created AutoScalingGroup
#as-create-or-update-trigger awsauto-nixontr –auto-scaling-group awsauto-nixongp –namespace “AWS/EC2″ –measure CPUUtilization –statistic Average –dimensions “AutoScalingGroupName=awsauto-nixongp” –period 60 –lower-threshold 40 –upper-threshold 80 –lower-breach-increment”=-1″ –upper-breach-increment 1 –breach-duration 1200 -K pk-XN....</p></div>
						<div class="post-list-footer text-center">
							<a href="https://www.vishnu-tech.com/blog/elb-and-autoscaling-in-aws/">Read More</a>
						</div>
					</div>
				</li>
				

			</ul>
			<div class="push"></div>
		</div>
		<footer class="footer text-center">
<p>Copyright &copy; 2017 -
<span class="credit">
	Powered by 
	<a target="_blank" href="https://www.vishnudxb.me">Vishnu Nair</a>
</span>
</p>
</footer>

	</body>
</html>
